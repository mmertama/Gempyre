<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>gempyre: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">gempyre
   &#160;<span id="projectnumber">1.3.8</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">gempyre Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__home_runner_work_Gempyre_Gempyre_README"></a> <img src="https://avatars1.githubusercontent.com/u/7837709?s=400&amp;v=4" alt="wqe" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md0"></a>
Gempyre</h1>
<h2><a class="anchor" id="autotoc_md1"></a>
UI Framework</h2>
<p>Gempyre is a UI multiplatform framework. Supporting Windows, Mac OSX, Linux, Raspberry OS and Android. Gempyre is minimalistic and simple; It is a UI framework without widgets - instead, the UI is composed using common web tools and frameworks. Therefore Gempyre is small, easy to learn and quick to take in use.</p>
<p>For the application, Gempyre let engine to be implemented using C++ (or Python), the UI can be constructed using CSS and HTML like any front end. All common tools from the web technologies are be available. Gempyre library provides a simple and easy C++ API for a application development and the whole API is only a few dozen calls.</p>
<p>Gempyre is intended for applications that has a solid C++ core (or C), and allows rapid UI development without extra hassle with platform specific UI development.</p>
<p>Gempyre is multiplatform, its core is written using C++17 (tested on OSX (CLang), Ubuntu (gcc), Raspberry OS (gcc) and Windows 10 (MSVC and MinGW) ). The Gempyre framework can be downloaded at Github under MIT license.</p>
<p>Gempyre itself does not contain an application window. The UI is drawn using external application. Some OSes defaults to system browser, some Python webview. However that is fully configurable per application.</p>
<p>Gempyre is a library that is linked with the application, except for Android, see <a href="https://github.com/mmertama/Gempyre-Android">Gempyre-Android</a>. For Python, install <a href="https://github.com/mmertama/Gempyre-Python">Gempyre-Python</a> on top of Gempyre library.</p>
<h3><a class="anchor" id="autotoc_md2"></a>
Gempyre API</h3>
<ul>
<li><a class="el" href="gempyre_8h.html">gempyre.h</a>, core classes for the application development.</li>
<li><a class="el" href="gempyre__utils_8h.html">gempyre_utils.h</a>, miscellaneous collection of helper functions. These are not available for Python as there are plenty of analogous functionality. <br  />
</li>
<li><a class="el" href="gempyre__graphics_8h.html">gempyre_graphics.h</a>, HTML canvas functions for bitmap and vector graphics.</li>
<li><a class="el" href="gempyre__client_8h_source.html">gempyre_client.h</a>, file dialogs for Gempyre application. Not available when system browser is used as an application window.</li>
</ul>
<p><a href="https://mmertama.github.io/Gempyre/">Gempyre Documentation</a></p>
<h3><a class="anchor" id="autotoc_md3"></a>
Linux</h3>
<ul>
<li>Run <div class="fragment"><div class="line">linux_install.sh</div>
</div><!-- fragment --></li>
</ul>
<h3><a class="anchor" id="autotoc_md4"></a>
Mac OSX</h3>
<ul>
<li>Run <div class="fragment"><div class="line">osx_install.sh</div>
</div><!-- fragment --></li>
</ul>
<h3><a class="anchor" id="autotoc_md5"></a>
Windows</h3>
<ul>
<li>Install git bash from <a href="https://gitforwindows.org/">https://gitforwindows.org/</a></li>
<li>Run git clone <a href="https://github.com/mmertama/Gempyre.git">https://github.com/mmertama/Gempyre.git</a> on git bash console.</li>
</ul>
<h4><a class="anchor" id="autotoc_md6"></a>
MSVC</h4>
<ul>
<li>Install cmake <a href="https://cmake.org/download/">https://cmake.org/download/</a> (let it to be added in path)</li>
<li>Install Visual Studio <a href="https://docs.microsoft.com/en-us/cpp/build/vscpp-step-0-installation?view=vs-2019">https://docs.microsoft.com/en-us/cpp/build/vscpp-step-0-installation?view=vs-2019</a>, and pick Desktop development with C++</li>
<li>Install Python (latest, yet tested mostly with 3.10, but 3.6 &gt;= shall be ok) <a href="https://www.python.org/downloads/windows/">https://www.python.org/downloads/windows/</a></li>
<li>From Windows menu, Visual Studio: Open "x64 Native Tools Command Prompt for VS 2019" (later probably ok)</li>
<li>Run <div class="fragment"><div class="line">msvc_install.bat</div>
</div><!-- fragment --></li>
</ul>
<h4><a class="anchor" id="autotoc_md7"></a>
MinGW</h4>
<ul>
<li>Make sure you are using the right MinGW shell (Msys minGW 64-bit - one with blue icon (Not brown or cyan :-))</li>
<li>See Instructions <a href="https://www.devdungeon.com/content/install-gcc-compiler-windows-msys2-cc">https://www.devdungeon.com/content/install-gcc-compiler-windows-msys2-cc</a></li>
<li>Ensure Ninja is installed <code>pacman -S base-devel gcc vim cmake ninja</code></li>
<li>Run <div class="fragment"><div class="line">mingw_install.sh</div>
</div><!-- fragment --></li>
</ul>
<h3><a class="anchor" id="autotoc_md8"></a>
Raspberry OS</h3>
<ul>
<li>Requires Rasberry OS Bullseye (older is ok, but you need more recent gcc in order to build C++17). Tested Raspberry Pi 3 and Raspberry Pi 4. <br  />
</li>
<li>Quite late CMake is required, here are <a href="https://snapcraft.io/install/cmake/raspbian#install">snap instructions</a>.</li>
<li>Run <div class="fragment"><div class="line">pi@raspberrypi:~/Development/Gempyre ./raspberry_install.sh</div>
</div><!-- fragment --></li>
<li>When building on Raspberry, please pass -DRASPBERRY=1 for your cmake call. E.g. <div class="fragment"><div class="line">pi@raspberrypi:~/Development/Tilze/build $ cmake .. -DRASPBERRY=1</div>
</div><!-- fragment --> </li>
</ul>
<h2><a class="anchor" id="autotoc_md9"></a>
FAQ</h2>
<p>Q: After installation you get: "WARNING: webview is not installed -&gt; verification is not completed!", what is that? A: Most likely python3 webview is not installed. See installation from <a href="https://pywebview.flowrl.com/guide/installation.html">pywebview</a>. Please also make sure websockets python library is installed. </p><div class="fragment"><div class="line">$ pip3 install pywebview &amp;&amp; pip3 install websockets</div>
</div><!-- fragment --><p> The error is not fatal, but as a consequence the default UI is not drawn on its own window and it fallbacks to the default browser.</p>
<p>Q: How to use some HTML/JS/CSS feature for GUI from C++ that does not have a API? A: Try <code>Ui::eval()</code>, it let you execute javascript in the gui context: e.g. Here I change a checkbox element so it fires a change event.</p>
<div class="fragment"><div class="line">ui.eval(<span class="stringliteral">&quot;document.getElementById(\&quot;&quot;</span> + check_box.id() + <span class="stringliteral">&quot;\&quot;).click();&quot;</span>);</div>
</div><!-- fragment --><p> Q: Why Canvas drawings seems to happen in random order? A: Canvas drawing is highly asynchronous operation and subsequent <code>CanvasElement::draw()</code> operations may not get updated in the order you have called them. The solution is either make a single draw call where all items are updated once, or use <code>CanvasElement::draw_completed()</code> to wait until each draw has happen. <code>CanvasElement::draw_completed()</code> should be used for animations (or game like frequent updates) instead of timers for updating the graphics. Like this <a href="https://github.com/mmertama/Gempyre/blob/6ef49c831c39f8dd67a0cd656f26dae4a2ff46e0/examples/fire/src/main.cpp#L100">example</a></p>
<p>Q: Why <code><a class="el" href="classGempyre_1_1Bitmap.html" title="Bitmap for Gempyre Graphics.">Gempyre::Bitmap</a></code> merge is not working? A: You are likely merge an uninitialized bitmap. <code><a class="el" href="classGempyre_1_1Bitmap.html" title="Bitmap for Gempyre Graphics.">Gempyre::Bitmap(width, height)</a></code> or <code>Gempyre::Bitmap::create(width, height)</code> does not initialize bitmap data, therefore it's alpha channel can be zero and bitmap is not drawn. To initialize the bitmap, use <code>Gempyre::Bitmap::Bitmap(0, 0, width, height, Gempyre::Color::White)</code>, or draw a rectangle to fill the Bitmap, after the construction.</p>
<p>Q: How to scale <code><a class="el" href="classGempyre_1_1Bitmap.html" title="Bitmap for Gempyre Graphics.">Gempyre::Bitmap</a></code>? A: You can use browser's bitmap scaling by applying the bitmap as image and then using <code><a class="el" href="classGempyre_1_1FrameComposer.html" title="wrap up Javascript draw commands.">Gempyre::FrameComposer</a></code> for draw. Look the following snippet:</p>
<div class="fragment"><div class="line"><span class="comment">// name the image</span></div>
<div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> image_key = <span class="stringliteral">&quot;/my_image.png&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// I define a lambda for drawing to avoid copy-paste. texture_images maps image names and ids.</span></div>
<div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> texture_draw = [&amp;ui, &amp;texture_images, image_key, clip, rect]() {</div>
<div class="line">  <a class="code" href="classGempyre_1_1CanvasElement.html">Gempyre::CanvasElement</a> compose(ui, COMPOSE_CANVAS);</div>
<div class="line">  <a class="code" href="classGempyre_1_1FrameComposer.html">Gempyre::FrameComposer</a> fc;</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> <span class="keywordtype">id</span> = texture_images[image_key];</div>
<div class="line">  fc.<a class="code" href="classGempyre_1_1FrameComposer.html#ac6f503e87a3fe553f7a3b0cfd9d8809a">draw_image</a>(<span class="keywordtype">id</span>, clip, target);</div>
<div class="line">  compose.draw(fc);</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"> <span class="comment">// test if image is already loaded</span></div>
<div class="line"> <span class="keyword">const</span> <span class="keyword">auto</span> res = ui.resource(image_key);</div>
<div class="line">    <span class="keywordflow">if</span>(!res) {</div>
<div class="line">      <span class="keyword">const</span> <span class="keyword">auto</span> png = bmp.png_image();  <span class="comment">// bmp is the image we want to scale - but we make a png out of it</span></div>
<div class="line">      <span class="keywordflow">if</span>(ui.add_data(image_key, png)) {  <span class="comment">// load the image</span></div>
<div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> <span class="keywordtype">id</span> = compose.add_image(image_key, [texture_draw](<span class="keyword">auto</span>){</div>
<div class="line">          texture_draw();                <span class="comment">// draw when loaded, too early request wont draw anything</span></div>
<div class="line">        });</div>
<div class="line">        texture_images.emplace(image_key, <span class="keywordtype">id</span>);    </div>
<div class="line">      }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      assert(ui.available(texture_images[image_key]));</div>
<div class="line">      texture_draw();</div>
<div class="line">    }</div>
<div class="ttc" id="aclassGempyre_1_1CanvasElement_html"><div class="ttname"><a href="classGempyre_1_1CanvasElement.html">Gempyre::CanvasElement</a></div><div class="ttdoc">Graphics element.</div><div class="ttdef"><b>Definition:</b> gempyre_graphics.h:36</div></div>
<div class="ttc" id="aclassGempyre_1_1FrameComposer_html"><div class="ttname"><a href="classGempyre_1_1FrameComposer.html">Gempyre::FrameComposer</a></div><div class="ttdoc">wrap up Javascript draw commands.</div><div class="ttdef"><b>Definition:</b> gempyre_graphics.h:144</div></div>
<div class="ttc" id="aclassGempyre_1_1FrameComposer_html_ac6f503e87a3fe553f7a3b0cfd9d8809a"><div class="ttname"><a href="classGempyre_1_1FrameComposer.html#ac6f503e87a3fe553f7a3b0cfd9d8809a">Gempyre::FrameComposer::draw_image</a></div><div class="ttdeci">FrameComposer draw_image(const std::string &amp;id, double x, double y)</div><div class="ttdoc">Visit the Mozialla documentation</div><div class="ttdef"><b>Definition:</b> gempyre_graphics.h:218</div></div>
</div><!-- fragment --><p>Q: How to do multiple <code><a class="el" href="classGempyre_1_1FrameComposer.html" title="wrap up Javascript draw commands.">Gempyre::FrameComposer</a></code> in a single draw? My second draw is not visible A: Do you call erase? See <code>CanvasElement::draw_completed above. You may also try to call your drawn in a</code>Ui::after` timer with 0ms delay, that should ensure the correct drawing order.</p>
<p>Q: Why my dynamic HTML <code>&lt;select&gt;</code> does not work with numbers? A: The UI select uses strings, and hence the values has to be <em>quoted</em> strings. </p><div class="fragment"><div class="line">&lt;select id=&quot;show_tags&quot; disabled&gt;&lt;/select&gt;  </div>
</div><!-- fragment --><div class="fragment"><div class="line"><a class="code" href="classGempyre_1_1Element.html">Gempyre::Element</a> show_tags(ui, <span class="stringliteral">&quot;show_tags&quot;</span>);</div>
<div class="line">show_tags.remove_attribute(<span class="stringliteral">&quot;disabled&quot;</span>);  <span class="comment">// remove disabled</span></div>
<div class="line"><span class="comment">// dynamical add items numerical keys</span></div>
<div class="line"><span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keywordtype">int</span> value : tag_keys) {</div>
<div class="line">     <a class="code" href="classGempyre_1_1Element.html">Gempyre::Element</a> opt{ui, <span class="stringliteral">&quot;option&quot;</span>, show_tags};</div>
<div class="line">     <span class="keyword">const</span> <span class="keyword">auto</span> value = std::to_string(value);   <span class="comment">// number as a string</span></div>
<div class="line">     opt.set_attribute(<span class="stringliteral">&quot;value&quot;</span>, GempyreUtils::qq(value)); <span class="comment">// The numerical values must be quoted, otherwise JS interpret them as numbers!</span></div>
<div class="line">     opt.set_attribute(<span class="stringliteral">&quot;name&quot;</span>, <span class="stringliteral">&quot;tag_option&quot;</span>);</div>
<div class="line">     opt.set_html(value);</div>
<div class="line"> }</div>
<div class="ttc" id="aclassGempyre_1_1Element_html"><div class="ttname"><a href="classGempyre_1_1Element.html">Gempyre::Element</a></div><div class="ttdoc">Represents all HTML elements on UI.</div><div class="ttdef"><b>Definition:</b> gempyre.h:55</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md10"></a>
Example</h2>
<h3><a class="anchor" id="autotoc_md11"></a>
Hello world</h3>
<p>As an example, here is a simple Gempyre application with a single button. The UI is written using HTML; please note the <b> <code> &lt;script type="text/javascript" src="gempyre.js"&gt; &lt;/script&gt; </code> </b> line is required for every Gempyre application. The HTML widgets are accessed by their HTML element ids from the C++.</p>
<div class="fragment"><div class="line">cmake_minimum_required(VERSION 3.26)</div>
<div class="line"> </div>
<div class="line">project( hello VERSION 1.0 LANGUAGES CXX)</div>
<div class="line"> </div>
<div class="line">add_executable(${PROJECT_NAME} main.cpp)</div>
<div class="line"> </div>
<div class="line"># Find Gempyre after installation </div>
<div class="line">find_package(Gempyre REQUIRED)</div>
<div class="line"> </div>
<div class="line"># Add gempyre_add_resources</div>
<div class="line">include(gempyre)</div>
<div class="line"> </div>
<div class="line">gempyre_add_resources(PROJECT ${PROJECT_NAME}</div>
<div class="line">    TARGET include/hello_resources.h </div>
<div class="line">    SOURCES gui/hello.html)</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">set_property(TARGET ${PROJECT_NAME} PROPERTY CXX_STANDARD 17)</div>
<div class="line">target_include_directories(${PROJECT_NAME} PRIVATE . include)</div>
<div class="line">target_link_libraries(${PROJECT_NAME} gempyre::gempyre)</div>
</div><!-- fragment --><div class="fragment"><div class="line"> &lt;!doctype html&gt;</div>
<div class="line"> </div>
<div class="line">&lt;html lang=&quot;en&quot;&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;head&gt;</div>
<div class="line"> </div>
<div class="line">        &lt;meta charset=&quot;utf-8&quot;&gt;</div>
<div class="line"> </div>
<div class="line">        &lt;title&gt;Hello&lt;/title&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;/head&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;body&gt;</div>
<div class="line"> </div>
<div class="line">        &lt;script type=&quot;text/javascript&quot; src=&quot;gempyre.js&quot;&gt;&lt;/script&gt;</div>
<div class="line"> </div>
<div class="line">        &lt;button id=&quot;startbutton&quot;&gt;...&lt;/button&gt;</div>
<div class="line"> </div>
<div class="line">        &lt;div id=&quot;content&quot;&gt;&lt;/div&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;/body&gt;</div>
<div class="line"> </div>
<div class="line">&lt;/html&gt;</div>
</div><!-- fragment --><p>And then we have a main.cpp. I discuss here every line by line. At first, <em><a class="el" href="gempyre_8h.html">gempyre.h</a></em> is included so it can be used.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include  &lt;<a class="code" href="gempyre_8h.html">gempyre.h</a>&gt;</span></div>
<div class="ttc" id="agempyre_8h_html"><div class="ttname"><a href="gempyre_8h.html">gempyre.h</a></div></div>
</div><!-- fragment --><p>Within Gempyre you normally build in the HTML and other resources, to compose a single file executable. It is preferred that Gempyre is statically linked in, thus the application is just a single file. Therefore distributing and executing Gempyre applications shall be very easy: just run it! There are no runtimes to install nor DLLs to be dependent on; just a single binary executable.</p>
<p>The resource composing is done in CMakeLists.txt (single line), yet here the generated header is included, it contains a <code>Hellohtml</code>, a <code>std::string</code> object that will be passed then to the <code><a class="el" href="classGempyre_1_1Ui.html" title="The application UI.">Gempyre::Ui</a></code> constructor.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;hello_resources.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> <span class="comment">/*argc*/</span>, <span class="keywordtype">char</span>** <span class="comment">/*argv*/</span>)  {</div>
</div><!-- fragment --><p>In the constructor, you provide a mapping between file names and generated data and the HTML page that will be shown.</p>
<div class="fragment"><div class="line"><a class="code" href="classGempyre_1_1Ui.html">Gempyre::Ui</a> ui({ {<span class="stringliteral">&quot;/hello.html&quot;</span>, Hellohtml} }, <span class="stringliteral">&quot;hello.html&quot;</span>);</div>
<div class="ttc" id="aclassGempyre_1_1Ui_html"><div class="ttname"><a href="classGempyre_1_1Ui.html">Gempyre::Ui</a></div><div class="ttdoc">The application UI.</div><div class="ttdef"><b>Definition:</b> gempyre.h:214</div></div>
</div><!-- fragment --><p>HTML elements are represented by <code><a class="el" href="classGempyre_1_1Element.html" title="Represents all HTML elements on UI.">Gempyre::Element</a></code>. The element constructor takes a HTML id to refer to the corresponding element in the UI. Here we refer to the text area and button as defined in the HTML code above. The <code><a class="el" href="classGempyre_1_1Element.html" title="Represents all HTML elements on UI.">Gempyre::Element</a></code> represents any of the HTML elements. It's only inherited class is <code><a class="el" href="classGempyre_1_1CanvasElement.html" title="Graphics element.">Gempyre::CanvasElement</a></code> that implements specific graphics functionalities.</p>
<div class="fragment"><div class="line"><a class="code" href="classGempyre_1_1Element.html">Gempyre::Element</a> text(ui, <span class="stringliteral">&quot;content&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><a class="code" href="classGempyre_1_1Element.html">Gempyre::Element</a> button(ui, <span class="stringliteral">&quot;startbutton&quot;</span>);</div>
</div><!-- fragment --><p>The Gempyre API provides a set of methods to get and set HTML content, values, and attributes. Here we just use setHTML to apply a given string as an element HTML content.</p>
<div class="fragment"><div class="line">button.set_html(<span class="stringliteral">&quot;Hello?&quot;</span>);</div>
</div><!-- fragment --><p>The subscribe method listens for element events, and when the button is "clicked" a given function is executed.</p>
<div class="fragment"><div class="line">button.subscribe(<span class="stringliteral">&quot;click&quot;</span>, [&amp;text]() {</div>
<div class="line"> </div>
<div class="line">     text.set_html(<span class="stringliteral">&quot;Hello World!&quot;</span>);</div>
<div class="line"> </div>
<div class="line">   });</div>
</div><!-- fragment --><p>The <code><a class="el" href="classGempyre_1_1Ui.html#a27e103d78134a29947142f878cdb258d" title="Starts the event loop.">Gempyre::Ui::run()</a></code> starts an event loop. In this example, the system default web browser is opened, and the UI is executed on tab (there are more alternatives to have a system looking application) and the application is waiting for the button to be pressed or the browser window to be closed.</p>
<div class="fragment"><div class="line">  ui.run();</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md12"></a>
Selection list</h3>
<p>Dynamic selection list (or combo box) is as easy as adding an empty <em>select</em> element in the Ui HTML code: </p><div class="fragment"><div class="line">&lt;select name=&quot;levels&quot; id=&quot;level_select&quot;&gt;</div>
<div class="line">&lt;/select&gt;</div>
</div><!-- fragment --><p> and then fill it in cpp side:</p>
<div class="fragment"><div class="line"><a class="code" href="classGempyre_1_1Element.html">Gempyre::Element</a> select{ui, <span class="stringliteral">&quot;level_select&quot;</span>};</div>
<div class="line"><span class="keywordflow">for</span>(<span class="keyword">const</span> std::string&amp; level : wp.levels()) {</div>
<div class="line">   <a class="code" href="classGempyre_1_1Element.html">Gempyre::Element</a> opt{ui, <span class="stringliteral">&quot;option&quot;</span>, select};</div>
<div class="line">   opt.<a class="code" href="classGempyre_1_1Element.html#a843a9040dc27de3a44a7b54e591b96dc">set_attribute</a>(<span class="stringliteral">&quot;value&quot;</span>, level);</div>
<div class="line">   opt.<a class="code" href="classGempyre_1_1Element.html#aa3b623e1e11aa8f18c302b2f5ff29e13">set_html</a>(level);</div>
<div class="line">   }</div>
<div class="ttc" id="aclassGempyre_1_1Element_html_a843a9040dc27de3a44a7b54e591b96dc"><div class="ttname"><a href="classGempyre_1_1Element.html#a843a9040dc27de3a44a7b54e591b96dc">Gempyre::Element::set_attribute</a></div><div class="ttdeci">Element &amp; set_attribute(const std::string &amp;attr, const std::string &amp;value)</div><div class="ttdoc">Set HTML a attribute of this element.</div></div>
<div class="ttc" id="aclassGempyre_1_1Element_html_aa3b623e1e11aa8f18c302b2f5ff29e13"><div class="ttname"><a href="classGempyre_1_1Element.html#aa3b623e1e11aa8f18c302b2f5ff29e13">Gempyre::Element::set_html</a></div><div class="ttdeci">Element &amp; set_html(const std::string &amp;htmlText)</div><div class="ttdoc">Set HTML text value of the element.</div></div>
</div><!-- fragment --><p>to read a value upon change you subscribe it's change:</p>
<div class="fragment"><div class="line">select.subscribe(<a class="code" href="structGempyre_1_1Event.html#aa0080263ed91146b54f0f5c37404d979">Gempyre::Event::CHANGE</a>, [](<span class="keyword">const</span> <span class="keyword">auto</span>&amp; e) {</div>
<div class="line">    std::cout &lt;&lt; e.properties.at(<span class="stringliteral">&quot;value&quot;</span>) &lt;&lt; std::endl;</div>
<div class="line">}, {<span class="stringliteral">&quot;value&quot;</span>});</div>
<div class="ttc" id="astructGempyre_1_1Event_html_aa0080263ed91146b54f0f5c37404d979"><div class="ttname"><a href="structGempyre_1_1Event.html#aa0080263ed91146b54f0f5c37404d979">Gempyre::Event::CHANGE</a></div><div class="ttdeci">static constexpr auto CHANGE</div><div class="ttdoc">Generic change.</div><div class="ttdef"><b>Definition:</b> gempyre.h:191</div></div>
</div><!-- fragment --><p>Applying an initial value is trivial:</p>
<div class="fragment"><div class="line">select.set_attribute(<span class="stringliteral">&quot;value&quot;</span>, wp.levels[level_index]); <span class="comment">// set value to some other than 1st</span></div>
</div><!-- fragment --><p>Please note that as each event has a lot of properties, you have to list what you need. For a selection change (as well as most of the inputs) a <b>value</b> is used. <br  />
</p>
<h3><a class="anchor" id="autotoc_md13"></a>
Some example projects using Gempyre</h3>
<ul>
<li><a href="https://github.com/mmertama/Gempyre/tree/raspberry/examples">Examples</a></li>
<li><a href="https://github.com/mmertama/mandelbrot-Gempyre">mandelbrot-Gempyre</a></li>
<li><a href="https://github.com/mmertama/treeview-Gempyre">treeview-Gempyre</a></li>
<li><a href="https://github.com/mmertama/hexview-Gempyre">hexview-Gempyre</a></li>
<li><a href="https://github.com/mmertama/calc-Gempyre">calc-Gempyre</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md14"></a>
Some future development directions</h2>
<ul>
<li>Binary releases (Maybe installer / some packet manager support / pip)</li>
<li>Support for secure web socket (nice for remote UIs)</li>
<li>Testing coverage and perf measurements.</li>
<li>JS testing <br  />
</li>
</ul>
<p>maybe not</p><ul>
<li>Flatbuffer/protobuf instead of JSON</li>
<li>Using WASM instead of JS</li>
<li>POC of Gempyre-Android style architecture also in core.git</li>
</ul>
<h2><a class="anchor" id="autotoc_md15"></a>
Late updates</h2>
<h3><a class="anchor" id="autotoc_md16"></a>
2021 1</h3>
<ul>
<li>Proper build and install with cmake</li>
<li>Use GTest for API testing</li>
<li>Rewrote timers + other smaller fixes</li>
</ul>
<h3><a class="anchor" id="autotoc_md17"></a>
2021 2</h3>
<ul>
<li>Lot of fixes and some new utils</li>
<li>Native application window for OSX, Linux and Windows are using <a href="https://github.com/mmertama/Hiillos">Hiillos</a> <br  />
</li>
</ul>
<h3><a class="anchor" id="autotoc_md18"></a>
2022 1</h3>
<ul>
<li>Lot of fixes</li>
<li>CI using Github actions</li>
</ul>
<h3><a class="anchor" id="autotoc_md19"></a>
2022 2</h3>
<ul>
<li>Lot of fixes</li>
<li>Raspberry, and improved MinGW support</li>
</ul>
<h3><a class="anchor" id="autotoc_md20"></a>
2023 1</h3>
<ul>
<li>Lot of fixed</li>
<li>API changes and harmonize with GemGui-rs</li>
<li>Testing coverage</li>
</ul>
<h3><a class="anchor" id="autotoc_md21"></a>
2023 2</h3>
<ul>
<li>Python UI fixes</li>
<li>Performance update</li>
<li>Refactoring internals</li>
<li>Ready to change uwebsockets to libwebsockets or websockets++. (however not completed)</li>
<li>Pedantic and Sanitizers</li>
<li>Suppress external library warnings (except MSVC not working, it seems :-/ )</li>
<li>Update / improve documentation</li>
</ul>
<p>Copyright Markus Mertama 2020, 2021, 2022, 2023 </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
